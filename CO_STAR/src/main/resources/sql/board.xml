<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="Board">
	<resultMap type="NoticeVO" id="noticeMap">
		<result property="noticeNo" column="no" jdbcType="NUMERIC" />
		<result property="noticeTitle" column="title" jdbcType="VARCHAR" />
		<result property="noticeContent" column="content" jdbcType="VARCHAR" />
		<result property="noticeWriteTime" column="writeTime" jdbcType="DATE" />
		<result property="noticeUpdateTime" column="updateTime"
			jdbcType="DATE" />
		<result property="memberVO.memberId" column="memberId"
			jdbcType="VARCHAR" />
	</resultMap>

	<!-- NOTICE -->
	<insert id="addNotice" parameterType="noticeVO">
		INSERT INTO notice Values(
		#{noticeNo},
		#{noticeTitle},
		#{noticeContent},
		sysdate,
		'',
		#{memberVO.memberId}
		)
	</insert>

	 <update id="updateNotice" parameterType="noticeVO">

		UPDATE notice SET
		noticeTitle = #{noticeTitle},
		noticeContent = #{noticeContent},
		noticeUpdateTime= SYSDATE
		WHERE noticeNo = #{noticeNo}

	</update>

	<delete id="deleteNotice" parameterType="noticeVO">
		DELETE FROM notice WHERE
		noticeNo=#{noticeNo}
	</delete>

	<select id="selectAllNotice" resultMap="noticeMap">
		SELECT * FROM Notice order by ASC
	</select>

	<select id="selectByNoticeNo" parameterType="string" resultType="noticeVO">
		SELECT * FROM notice WHERE noticeNo = #{value}
	</select>
	
	 
	<!-- FAQNA -->

	<resultMap type="FaqnaVO" id="FaqnaMap">
		<result property="faqnaNo" column="no" jdbcType="NUMERIC" />
		<result property="faqnaTitle" column="title" jdbcType="VARCHAR" />
		<result property="faqnaContent" column="content" jdbcType="VARCHAR" />
		<result property="faqnaCategory" column="category" jdbcType="VARCHAR" />
		<result property="faqnaWriteTime" column="writeTime" jdbcType="DATE" />
		<result property="faqnaUpdateTime" column="updateTime" jdbcType="DATE" />
		<result property="memberVO.memberId" column="memberId" jdbcType="VARCHAR" />
	</resultMap>


	<insert id="addFaqna" parameterType="faqnaVO">
		INSERT INTO Faqna Values(
			#{faqnaNo},
			#{faqnaTitle},
			#{faqnaContent},
			#{faqnaCategory},
			sysdate,
			#{faqnaUpdateTime},
			#{memberVO.memberId}	
		)	
	</insert>
 
	<update id="updateFaqna" parameterType="faqnaVO">
		UPDATE faqna SET
			faqnaTitle = #{faqnaTitle},
			faqnaContent = #{faqnaContent},
			faqnaCategory =#{faqnaCategory},
			faqnaUpdateTime = sysdate 
		WHERE faqnaNo = #{faqnaNo}			
	</update>


	<delete id="deleteFaqna" parameterType="faqnaVO">
		DELETE FROM Faqna WHERE
		faqnaNo=#{faqnaNo}
	</delete> 
		 
		 
		 
	<select id="selectAllFaqna" resultMap="FaqnaMap">
		SELECT * FROM faqna order by desc
	</select>

	<select id="selectByFaqnaNo" parameterType="string" resultMap="FaqnaMap">
		SELECT * FROM faqna WHERE faqnaNo=#{value}
	</select>





	<select id="selectConcertCommentAll" resultType="concertCommentVO">
			SELECT * FROM ConcertComment
	</select>
	
	<insert id="addConcertComment" parameterType="concertCommentVO">
		INSERT INTO ConcertComment VALUES
		(
			#{concertVO.concertId},
			#{memberVO.memberId},
			#{concertCommentContent},
			sysdate,
			'',
			#{concertCommentLike},
			#{concertCommentRating}
		)
	</insert>
	
	<update id="updateConcertComment" parameterType="concertCommentVO" >
		UPDATE ConcertComment SET
			concertCommentContent=#{concertCommentContent},
			concertCommentUpdateTime=sysdate,
			concertCommentLike= #{concertCommentLike},
			concertCommentRating = #{concertCommentRating}
		WHERE concertId=#{concertVO.concertId}
	</update>
	
	
	<update id="updateConcertCommentCount" parameterType="string">
		UPDATE Concert SET concertCommentCount = concertCommentCount+1 
		WHERE concertId=#{value}
	</update>
	
	<delete id="deleteConcertComment" parameterType="concertCommentVO">
		DELETE FROM ConcertComment 
		WHERE concertId=#{concertVO.concertId} AND
		memberId=#{memberVO.memberId}
	</delete>
	
		
	
	
	<sql id="select-concert">
		SELECT * FROM
	</sql>
	
	<sql id="whereorder-concert">
		WHERE sysdate BETWEEN  concertStartDate AND concertEndDate
		ORDER BY concertEndDate
	</sql>
	

</mapper>










